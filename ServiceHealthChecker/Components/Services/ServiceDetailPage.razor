@if (serviceToEdit != null)
{
    <ServiceForm newService="serviceToEdit" DoneCallback="@(() => serviceToEdit = null)" />
}
else
{
    <Label Text=@service.Name />
    <Label Text=@($"Method: {service.Method}") />
    <Label Text=@($"URI: {service.URI}") />
    <Label Text=@($"Timeout: {service.Timeout.TotalSeconds:00}s") />
    <Label Text="Validation:" />
    <Label Text=@($"Expected response: {service.ExpectedResponseCode}") />
    <Button OnClick="@(() => serviceToEdit = service)" Text="Edit" />
    <Button OnClick="@DeleteService" Text="Delete" />
    <Button OnClick="@GoBack" Text="Go back" />
    <Label Text="History:" />
    <ServiceHealthChecker.Components.History.HistoryView ServiceId="@service.ID" />

}

@using DB.Models
@code {

    [Parameter]
    public Service service { get; set; }

    [Parameter]
    public EventCallback GoBack { get; set; }

    private ServiceHealthChecker.DB.Models.Service serviceToEdit = null;

    private async Task DeleteService()
    {
        await App.ServicesDb.DeleteServiceAsync(service);
        await GoBack.InvokeAsync(EventCallback.Empty);
    }

}
